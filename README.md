# **快樂署北PA假日抽前系統**

一個現代、直觀的網頁應用程式，專為團隊設計，用以公平、透明地管理連續假期的排班登記與抽籤。

## ✨ 主要功能

-   **雲端資料同步**: 所有資料皆安全儲存在 **Cloudflare KV** 雲端資料庫中，實現跨裝置、跨瀏覽器即時同步。
-   **年度假期總覽**: 在頁面底部提供一個清晰的總覽區塊，以成員為單位，展示所有已批准的假期，讓排班狀況一目了然。
-   **智慧分配假期**: 提供「**一鍵自動分配**」功能，可將剩餘假期名額，以公平為原則，優先分配給年度休假最少的成員。
-   **團隊管理**: 快速新增或移除團隊成員。
-   **彈性假期設定**:
    -   可自訂假期名稱、區間、名額，並支援兩種排班模式。
    -   支援**線上即時編輯**假期細節（日期、名額）。
    -   支援**拖曳排序**假期列表，方便管理。
-   **模式一：一般權重模式**
    -   成員使用權重 (1-10) 申請假期，**數字越小，順位越優先**。
    -   可**全域設定權重上限**，精細化管理。
    -   獨特的**年度權重限制**：每位成員在同一年內，每種權重數字僅能使用一次，確保公平性。
    -   支援**線上編輯權重**，方便隨時調整。
    -   系統自動依據名額顯示「已批准」與「候補」狀態。
-   **模式二：春節特殊抽籤模式**
    -   以**每日**為單位進行排班，一目了然。
    -   系統自動生成「除夕」、「初一」等備註，並**支援使用者自訂修改**。
    -   支援成員**自願登記**想要的日期。
    -   內建**一鍵抽籤**功能，可從剩餘成員中隨機填補空缺日期。
-   **響應式設計**: 在桌面和行動裝置上皆有優良的瀏覽體驗。

## 🚀 如何使用

1.  **全域設定**: 在左側「全域設定」區塊，設定您希望的「預設權重(及權重上限)」。
2.  **新增成員**: 在「團隊成員」區塊，輸入成員姓名並點擊「新增」。
3.  **建立假期**:
    -   在「假期期間」區塊，點擊標題展開表單。
    -   填寫假期資訊，並選擇此假期適用「一般權重模式」還是「春節特殊抽籤模式」。
    -   點擊「新增假期」。
4.  **管理假期**:
    -   **排序**: 按住假期項目左側的圖示，上下拖曳即可排序。
    -   **編輯**: 點擊右側假期詳情中的**鉛筆圖示**，即可修改假期的日期和名額。
5.  **開始排班**:
    *   **對於一般假期**:
        1.  從假期列表中點選該假期。
        2.  在「登記此假期」區塊，選擇成員並從下拉選單中選擇一個**今年度尚未使用過**的權重。
        3.  點擊「提交申請」。
        4.  若要修改，點擊申請者右側的**鉛筆圖示**即可重新選擇權重。
    *   **對於春節假期**:
        1.  從假期列表中點選該假期。
        2.  **修改備註**: 點擊每日備註（如「除夕」）旁的**鉛筆圖示**，即可自訂文字。
        3.  在「自願登記與抽籤」區塊，先選擇一位成員。
        4.  在下方的每日排班表中，找到想自願的日期，點擊旁邊的「自願此日」按鈕。
        5.  若所有自願登記完成後仍有空缺，可點擊上方的「執行抽籤」按鈕自動補滿。
6.  **自動分配**: 當所有成員登記完畢後，可點擊「全域設定」中的「**自動分配剩餘假期**」按鈕，讓系統為您公平地補完剩餘名額。
7.  **查看總覽**: 在頁面最下方，可以查看每位成員的年度假期總覽。

## 🛠️ 技術棧

-   **React**: 前端 UI 框架
-   **TypeScript**: 提供靜態型別檢查，提升程式碼品質
-   **Tailwind CSS**: 用於快速建構現代化 UI 的 CSS 框架
-   **Cloudflare Pages & Functions**: 用於部署和後端 API
-   **Cloudflare KV**: 用於雲端資料儲存

## 📁 專案結構

```
/
├── functions/           # Cloudflare Functions 後端 API
│   └── api/
│       └── data.ts      # 處理資料讀寫的 API 端點
├── components/          # React 元件
│   ├── icons/           # SVG 圖示元件
│   ├── HolidayDetail.tsx # 假期詳情與排班操作介面
│   ├── HolidayManager.tsx # 假期列表與新增介面
│   ├── TeamMemberManager.tsx # 團隊成員管理介面
│   └── HolidayOverview.tsx # 全新的年度假期總覽元件
├── App.tsx              # 應用程式主元件，管理所有狀態和邏輯
├── index.html           # 應用程式進入點 HTML
├── index.tsx            # React 渲染進入點
├── types.ts             # 全域 TypeScript 型別定義
└── metadata.json        # 應用程式元數據
```